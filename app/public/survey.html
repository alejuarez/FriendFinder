<!DOCTYPE html>
<html lang='en'>

<head>
	<meta charset='utf-8'>
	<!-- <meta http-equiv="content-type" content="application/json" /> -->
	<title>Friend Finder - Survey</title>

	<link rel='stylesheet' href='https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css'>
	<link rel='stylesheet' type='text/css' href='public/style.css'>
</head>

<body>
	<div class='container'>
		<div class='jumbotron'>
			<h1>Survey Questions</h1><br>
			<form action='/api/friends'>
				<h3><strong>About You</strong></h3>
				<div class='form-group'>
					<label for='name'>Name (Required)</label>
					<input type='text' class='form-control' placeholder='Your Name' id='name' name='name' required>
				</div>
				<div class='form-group'>
					<label for='photo'>Link to Photo Image (Required)</label>
					<input type='text' class='form-control' placeholder='http://coolpic.jpg' id='photo' name='photo' required>
				</div>
				<h4><strong>Question 1</strong></h4>
				<div class='form-group'>
					<label for='quest1'>I like to travel</label>
					<br>
					<div class='col-md-4'>
						<select class='form-controlq' id='quest1'>
							<option value='1'>1 (Strongly Disagree)</option>
							<option value='2'>2</option>
							<option value='3'>3</option>
							<option value='4'>4</option>
							<option value='5'>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
				<h4><strong>Question 2</strong></h4>
				<div class='form-group'>
					<label for='quest2'>I like to be organized</label>
					<br>
					<div class='col-md-4'>
						<select class='form-controlq' id='quest2'>
							<option value='1'>1 (Strongly Disagree)</option>
							<option value='2'>2</option>
							<option value='3'>3</option>
							<option value='4'>4</option>
							<option value='5'>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
				<h4><strong>Question 3</strong></h4>
				<div class='form-group'>
					<label for='quest3'>I love to hang out with my friends</label>
					<br>
					<div class='col-md-4'>
						<select class='form-controlq' id='quest3'>
							<option value='1'>1 (Strongly Disagree)</option>
							<option value='2'>2</option>
							<option value='3'>3</option>
							<option value='4'>4</option>
							<option value='5'>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
				<h4><strong>Question 4</strong></h4>
				<div class='form-group'>
					<label for='quest4'>I can keep a secret</label>
					<br>
					<div class='col-md-4'>
						<select class='form-controlq' id='quest4'>
							<option value='1'>1 (Strongly Disagree)</option>
							<option value='2'>2</option>
							<option value='3'>3</option>
							<option value='4'>4</option>
							<option value='5'>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
				<h4><strong>Question 5</strong></h4>
				<div class='form-group'>
					<label for='quest5'>I have maintained friendships since JK</label>
					<br>
					<div class='col-md-4'>
						<select class='form-controlq' id='quest5'>
							<option value='1'>1 (Strongly Disagree)</option>
							<option value='2'>2</option>
							<option value='3'>3</option>
							<option value='4'>4</option>
							<option value='5'>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
				<h4><strong>Question 6</strong></h4>
				<div class='form-group'>
					<label for='quest6'>I like to go to the movies</label>
					<br>
					<div class='col-md-4'>
						<select class='form-controlq' id='quest6'>
							<option value='1'>1 (Strongly Disagree)</option>
							<option value='2'>2</option>
							<option value='3'>3</option>
							<option value='4'>4</option>
							<option value='5'>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
				<h4><strong>Question 7</strong></h4>

				<div class='form-group'>
					<label for='quest7'>I prefer long walks</label>
					<br>
					<div class='col-md-4'>
						<select class='form-controlq' id='quest7'>
							<option value='1'>1 (Strongly Disagree)</option>
							<option value='2'>2</option>
							<option value='3'>3</option>
							<option value='4'>4</option>
							<option value='5'>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
				<h4><strong>Question 8</strong></h4>
				<div class='form-group'>
					<label for='quest8'>I love to play board games</label>
					<br>
					<div class='col-md-4'>
						<select class='form-controlq' id='quest8'>
							<option value='1'>1 (Strongly Disagree)</option>
							<option value='2'>2</option>
							<option value='3'>3</option>
							<option value='4'>4</option>
							<option value='5'>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
				<h4><strong>Question 9</strong></h4>
				<div class='form-group'>
					<label for='quest9'>I like sports</label>
					<br>
					<div class='col-md-4'>
						<select class='form-controlq' id='quest9'>
							<option value='1'>1 (Strongly Disagree)</option>
							<option value='2'>2</option>
							<option value='3'>3</option>
							<option value='4'>4</option>
							<option value='5'>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
				<h4><strong>Question 10</strong></h4>
				<div class='form-group'>
					<label for='quest10'>I like to watch sunsets</label>
					<br>
					<div class='col-md-4'>
						<select class='form-controlq' id='quest10'>
							<option value='1'>1 (Strongly Disagree)</option>
							<option value='2'>2</option>
							<option value='3'>3</option>
							<option value='4'>4</option>
							<option value='5'>5 (Strongly Agree)</option>
						</select>
					</div>
				</div><br>
				<button type='submit' class='btn btn-primary' value='Request Friend' data-target='matchModal' id='submit'>Submit</button>
			</form>
		</div>

		<br>
		<footer class='footer'>
			<div class='container'>
				<p> <a href='/api/friends'>API Friends List</a> | <a href='http://github.com/alejuarez'>Github Repo</a></p>
			</div>
		</footer>
	</div>

	<!-- Button trigger modal -->
	<div id='matchModal' class='modal'>
		<div class="modal-content">
			// <h5 class="modal-title">Best Friend</h5>
			<h5 id="matchName"></h5>
			<img id="matchImg" src="" alt="No Image" width=250px>
		</div>
		<div class="modal-footer">
			<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
		</div>
	</div>


	<script src='https://code.jquery.com/jquery-3.3.1.js'></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js'></script>
	<script src='https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js'></script>

	<script type='text/javascript'>
		$(document).ready(function () {
			$('#submit').on('click', function () {
				var isValid = true;
				if (($('#name').val === '') || ($('#photo').val === '')) {
					isValid = false;
				}
				$('.form-controlq').each(function () {
					if ($(this).val() === '') {
						isValid = false;
					}
				});

				if (isValid) {
					console.log('not empty');
					var userInput = {
						name: $('#name').val().trim(),
						photo: $('#photo').val().trim(),
						scores: [$('#quest1').val(), $('#quest2').val(), $('#quest3').val(), $('#quest4').val(), $('#quest5').val(), $('#quest6').val(), $('#quest7').val(), $('#quest8').val(), $('#quest9').val(), $('#quest10').val()]
					}
					console.log('user inp =', userInput);
					var currentURL = window.location.origin;
					console.log('url = ', currentURL);
					$.post(currentURL + '/api/friends', userInput, function (data) {
						console.log('adding new');
						$('#matchName').text(data.name);
						$('#matchImg').attr('src', data.photo);
						$('#matchModal').modal('toggle');
						$('#name').val('');
						$('#photo').val('');
						$('#quest1').val('');
						$('#quest2').val('');
						$('#quest3').val('');
						$('#quest4').val('');
						$('#quest5').val('');
						$('#quest6').val('');
						$('#quest7').val('');
						$('#quest8').val('');
						$('#quest9').val('');
						$('#quest10').val('');

					});
					//return false;
				}
			});
		})

	</script>
</body>

</html>